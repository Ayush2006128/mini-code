<div class="code-editor-container" [class.dark-theme]="isDarkTheme" [class.vertical-layout]="isVerticalLayout">
  
  <!-- Toolbar -->
  <div class="toolbar">
    <div class="toolbar-left">
      <button class="toolbar-btn" (click)="runCode()" title="Run Code (Ctrl+Enter)">
        <lucide-angular [img]="PlayIcon" class="icon" size="16"></lucide-angular>
        Run
      </button>
      <button class="toolbar-btn" (click)="formatCode()" title="Format Code">
        <lucide-angular [img]="Code2Icon" class="icon" size="16"></lucide-angular>
        Format
      </button>
    </div>
    
    <div class="toolbar-center">
      <span class="project-name">Untitled Project</span>
    </div>
    
    <div class="toolbar-right">
      <button class="toolbar-btn" (click)="toggleLayout()" [title]="isVerticalLayout ? 'Switch to Horizontal' : 'Switch to Vertical'">
        <lucide-angular [img]="isVerticalLayout ? LayoutIcon : LayoutGridIcon" class="icon" size="16"></lucide-angular>
        Layout
      </button>
      <button class="toolbar-btn" (click)="toggleTheme()" [title]="isDarkTheme ? 'Light Theme' : 'Dark Theme'">
        <lucide-angular [img]="isDarkTheme ? SunIcon : MoonIcon" class="icon" size="16"></lucide-angular>
        Theme
      </button>
      <button class="toolbar-btn" (click)="toggleConsole()" title="Toggle Console (Ctrl+`)">
        <lucide-angular [img]="TerminalIcon" class="icon" size="16"></lucide-angular>
        Console
      </button>
      <button class="toolbar-btn" (click)="exportCode()" title="Export Code">
        <lucide-angular [img]="DownloadIcon" class="icon" size="16"></lucide-angular>
        Export
      </button>
      <button class="toolbar-btn" (click)="resetCode()" title="Reset to Default">
        <lucide-angular [img]="RotateCcwIcon" class="icon" size="16"></lucide-angular>
        Reset
      </button>
    </div>
  </div>

  <!-- Main Editor Layout -->
  <div class="editor-layout">
    
    <!-- Editors Panel -->
    <div class="editors-panel">
      
      <!-- HTML Editor -->
      <div class="editor-section">
        <div class="editor-header">
          <span class="editor-title">
            <lucide-angular [img]="FileCodeIcon" class="language-icon html-icon" size="16"></lucide-angular>
            HTML
          </span>
          <div class="editor-actions">
            <button class="editor-action-btn" (click)="copyCode('html')" title="Copy HTML">
              <lucide-angular [img]="CopyIcon" size="14"></lucide-angular>
            </button>
          </div>
        </div>
        <div class="editor-wrapper">
          <div #htmlEditor class="code-editor html-editor"></div>
        </div>
      </div>

      <!-- CSS Editor -->
      <div class="editor-section">
        <div class="editor-header">
          <span class="editor-title">
            <lucide-angular [img]="PaletteIcon" class="language-icon css-icon" size="16"></lucide-angular>
            CSS
          </span>
          <div class="editor-actions">
            <button class="editor-action-btn" (click)="copyCode('css')" title="Copy CSS">
              <lucide-angular [img]="CopyIcon" size="14"></lucide-angular>
            </button>
          </div>
        </div>
        <div class="editor-wrapper">
          <div #cssEditor class="code-editor css-editor"></div>
        </div>
      </div>

      <!-- JavaScript Editor -->
      <div class="editor-section">
        <div class="editor-header">
          <span class="editor-title">
            <lucide-angular [img]="ZapIcon" class="language-icon js-icon" size="16"></lucide-angular>
            JS
          </span>
          <div class="editor-actions">
            <button class="editor-action-btn" (click)="copyCode('js')" title="Copy JavaScript">
              <lucide-angular [img]="CopyIcon" size="14"></lucide-angular>
            </button>
          </div>
        </div>
        <div class="editor-wrapper">
          <div #jsEditor class="code-editor js-editor"></div>
        </div>
      </div>
      
    </div>

    <!-- Preview Panel -->
    <div class="preview-panel">
      <div class="preview-header">
        <span class="preview-title">
          <lucide-angular [img]="EyeIcon" class="preview-icon" size="16"></lucide-angular>
          Preview
        </span>
        <div class="preview-actions">
          <button class="preview-action-btn" (click)="runCode()" title="Refresh Preview">
            <lucide-angular [img]="RotateCcwIcon" size="14"></lucide-angular>
          </button>
          <button class="preview-action-btn" title="Open in New Tab">
            <lucide-angular [img]="Link2Icon" size="14"></lucide-angular>
          </button>
        </div>
      </div>
      <div class="preview-wrapper">
        <iframe #preview class="preview-frame" 
                sandbox="allow-scripts allow-same-origin allow-forms allow-popups"
                title="Code Preview">
        </iframe>
        <div class="preview-loading">
          <div class="spinner"></div>
          <span>Loading preview...</span>
        </div>
      </div>
    </div>
    
  </div>
  
  <!-- Console Output -->
  <div class="console-panel" [class.show]="showConsole">
    <div class="console-header">
      <span class="console-title">
        <lucide-angular [img]="MessageSquareIcon" class="console-icon" size="12"></lucide-angular>
        Console
      </span>
      <button class="console-clear-btn" (click)="clearConsole()">
        <lucide-angular [img]="Trash2Icon" size="10"></lucide-angular>
        Clear
      </button>
    </div>
    <div class="console-output">
      <div *ngFor="let message of consoleMessages" 
           class="console-message"
           [class]="'console-' + message.type">
        <span class="console-timestamp">{{ message.timestamp | date:'HH:mm:ss' }}</span>
        <span class="console-type">[{{ message.type.toUpperCase() }}]</span>
        <span class="console-text">{{ message.message }}</span>
      </div>
      <div *ngIf="consoleMessages.length === 0" class="console-empty">
        Console output will appear here...
      </div>
    </div>
  </div>
  
</div>
